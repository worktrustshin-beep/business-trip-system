# 出張管理システム

## 概要

会社の出張情報を一元管理できるWebベースの管理システムです。カレンダー形式で視覚的に出張情報を管理でき、誰がいつどこに出張していて、どのホテルに泊まっているかを簡単に把握できます。

## 主な機能

### ✅ 実装済み機能

#### カレンダー機能
1. **Googleカレンダー風のインターフェース**
   - 月表示・週表示の切り替え可能
   - 直感的な操作性
   - レスポンシブデザイン対応

2. **人ごとの色分け表示**
   - 各社員に異なる色を自動割り当て
   - カレンダー上で一目で誰の出張か判別可能
   - 社員カラーのカスタマイズ機能

3. **カレンダー直接入力**
   - カレンダーの日付をクリックして直接出張登録
   - ダブルクリックで出張情報の編集
   - ドラッグ&ドロップでの日付変更（将来的な実装予定）

4. **イベント詳細表示**
   - カレンダー上に社員名と出張先を直接表示
   - 詳細をクリックせずに情報を確認可能
   - マルチデイイベントの連続表示（例：2/1～2/15をひとくくりとして表示）

#### ホテル滞在期間・契約期間管理
1. **ホテル滞在期間の詳細管理**
   - ホテル滞在開始日・終了日を出張期間とは別に設定可能
   - ホテル種類の選択（ビジネスホテル/マンスリーホテル）
   - ホテル名、滞在期間、種類を同時に管理

2. **ホテル契約期間の可視化**
   - ホテルごとの契約期間をカレンダー上で表示
   - 契約期間の開始日・終了日を一元管理
   - 最大利用可能部屋数の設定と管理

3. **ホテル利用状況のリアルタイム表示**
   - 右側パネルに現在の宿泊先情報を一覧表示
   - 誰がどのホテルに宿泊しているか瞬時に確認
   - ホテルごとの利用状況（空室率）を自動計算

4. **ホテル契約期間管理画面**
   - 専用の管理画面（hotel-contracts.html）で契約を一元管理
   - ホテル契約の新規登録・編集・削除機能
   - 契約期間の延長機能（ワンクリックで期間延長）

5. **利用状況の詳細分析**
   - ビジネスホテル：日単位の利用者数をカウント
   - マンスリーホテル：月単位のユニーク利用者数をカウント
   - 利用状況サマリーで全体の統計情報を表示

#### リスト表示（従来機能）
1. **出張情報の登録・編集・削除**
   - 社員名、出張先、開始日、終了日、ホテル名、備考の登録
   - 既存データの編集機能
   - 削除確認付きの削除機能

2. **検索・フィルタ機能**
   - 日付での検索（特定の日に出張している人を検索）
   - 社員名での検索
   - 出張先での検索

3. **日付制御**
   - 終了日は開始日より前の日付を選択不可
   - 自動的な日付の妥当性検証

4. **データ永続化**
   - ブラウザのローカルストレージを使用したデータ保存
   - ページリロード後もデータ保持

### ホテル情報管理
1. **ホテル情報一覧（右側パネル）**
   - 現在宿泊中のホテル情報を一覧表示
   - ホテル名、宿泊者名、宿泊期間を表示
   - リアルタイムでの更新

## 使用方法

### カレンダー画面（calendar.html）

1. **カレンダー操作**
   - 「<」「>」ボタンで前後の月/週に移動
   - 「今日」ボタンで現在の日付に戻る
   - 「月表示」「週表示」で表示切替

2. **出張登録**
   - カレンダーの日付をクリックして出張登録
   - 社員を選択し、出張先、期間、ホテル名を入力
   - ホテル滞在期間を出張期間とは別に設定可能
   - ホテル種類（ビジネス/マンスリー）を選択
   - 保存ボタンで登録完了

3. **出張編集・削除**
   - カレンダー上の出張イベントをクリック
   - 編集画面で情報を修正して保存
   - 削除ボタンで出張情報を削除

4. **社員登録**
   - 「社員登録」ボタンをクリック
   - 社員名を入力して好きな色を選択
   - 保存してカラーを割り当て

5. **ホテル契約管理**
   - 「ホテル管理」ボタンでホテル契約管理画面に移動
   - ホテル契約の登録・編集・期間延長が可能

### ホテル契約管理画面（hotel-contracts.html）

1. **ホテル契約の登録**
   - 「契約登録」ボタンをクリック
   - ホテル名、種類、契約期間、最大部屋数を設定
   - 保存で契約を登録

2. **契約期間の管理**
   - カレンダー上で契約期間を視覚的に確認
   - ビジネスホテルは緑色、マンスリーホテルは紫色で表示
   - 契約ステータス（支払い済み/未払い）を管理

3. **利用状況の確認**
   - 各ホテルの現在の利用状況をリアルタイムで表示
   - 利用者数/契約部屋数の割合をパーセンテージで表示
   - 右側のサマリーで全体の統計情報を確認

4. **契約期間の延長**
   - 各ホテルの「延長」ボタンをクリック
   - 新しい契約終了日を選択
   - 延長理由を入力して「延長する」ボタンで期間延長

### リスト画面（index.html）

1. **出張情報の登録**
   - 「出張登録」ボタンをクリック
   - 必要事項を入力して「保存」ボタンをクリック

2. **出張情報の編集**
   - 一覧の編集ボタン（青い鉛筆アイコン）をクリック
   - 情報を修正して「保存」ボタンをクリック

3. **出張情報の削除**
   - 一覧の削除ボタン（赤いゴミ箱アイコン）をクリック
   - 確認メッセージで「削除」をクリック

4. **検索の使い方**
   - 左側の検索パネルで条件を設定
   - 「検索」ボタンをクリック
   - 「クリア」ボタンで検索条件をリセット

## 技術仕様

### フロントエンド
- HTML5
- CSS3（Bootstrap 5）
- JavaScript（ES6+）
- Font Awesome（アイコン）

### データベース
- ブラウザ内蔵のRESTfulテーブルAPIを使用
- データモデル：business_tripsテーブル

### データ構造
- 社員名（employee_name）
- 出張先（destination）
- 開始日（start_date）
- 終了日（end_date）
- ホテル名（hotel）
- ホテル滞在開始日（hotel_check_in）
- ホテル滞在終了日（hotel_check_out）
- ホテル種類（hotel_type）
- 備考（notes）

#### ホテル契約管理（hotel_contractsテーブル）
- ホテル名（hotel_name）
- ホテル種類（hotel_type）：ビジネスホテル/マンスリーホテル
- 契約開始日（contract_start_date）
- 契約終了日（contract_end_date）
- 最大利用可能部屋数（max_rooms）
- ステータス（status）：支払い済み/未払い

## ファイル構成

```
calendar.html           # カレンダーページ（メイン）
hotel-contracts.html    # ホテル契約管理画面
index.html              # リスト表示ページ（従来版）
/css/
  calendar.css          # カレンダー用スタイル
  hotel-contracts.css   # ホテル契約管理用スタイル
  style.css             # リスト表示用スタイル
/js/
  calendar.js             # カレンダー用JavaScript
  hotel-contracts.js    # ホテル契約管理用JavaScript
  app.js                # リスト表示用JavaScript
```

## APIエンドポイント

### 出張管理
- `GET tables/business_trips` - 出張情報一覧取得
- `POST tables/business_trips` - 出張情報登録
- `PUT tables/business_trips/{id}` - 出張情報更新
- `DELETE tables/business_trips/{id}` - 出張情報削除

### ホテル契約管理
- `GET tables/hotel_contracts` - ホテル契約情報一覧取得
- `POST tables/hotel_contracts` - ホテル契約登録
- `PUT tables/hotel_contracts/{id}` - ホテル契約更新
- `DELETE tables/hotel_contracts/{id}` - ホテル契約削除

## 主な特徴

### カレンダー表示の利点
- **視覚的な理解**: 月単位で誰がいつ出張しているか一目で把握
- **色分け表示**: 社員ごとに異なる色を使用して識別しやすい
- **直感的操作**: Googleカレンダーのような使い慣れたインターフェース
- **詳細表示**: カレンダー上に直接社員名と出張先を表示

### ホテル情報管理
- **右側パネル**: 現在の宿泊先情報を常に表示
- **一目で把握**: 誰がどのホテルに宿泊しているか瞬時に確認
- **リアルタイム更新**: 出張情報の登録・更新と連動

## APIエンドポイント

### 出張管理
- `GET tables/business_trips` - 出張情報一覧取得
- `POST tables/business_trips` - 出張情報登録
- `PUT tables/business_trips/{id}` - 出張情報更新
- `DELETE tables/business_trips/{id}` - 出張情報削除

### ホテル契約管理
- `GET tables/hotel_contracts` - ホテル契約情報一覧取得
- `POST tables/hotel_contracts` - ホテル契約登録
- `PUT tables/hotel_contracts/{id}` - ホテル契約更新
- `DELETE tables/hotel_contracts/{id}` - ホテル契約削除

## 今後の改善案

1. **カレンダー機能拡張**
   - ドラッグ&ドロップでの期間変更
   - 複数社員の一括登録
   - カレンダーへの画像添付
   - 予定の重複チェック機能

2. **データ管理機能**
   - CSVエクスポート機能 - 出張情報をCSVファイルとして出力
   - 統計レポート - 月別・社員別の出張集計
   - メール通知機能 - 出張予定のリマインダー通知

3. **UI/UX改善**
   - ダークモード対応
   - カスタマイズ可能なテーマ
   - モバイルアプリ風インターフェース

## デプロイ方法

このシステムは静的ウェブサイトとして動作します。作成したファイルをウェブサーバーにアップロードするだけで動作します。

**Publishタブ**でワンクリックでデプロイすることができます。Publishタブに移動して、プロジェクトを公開してください。

## 注意事項

- このシステムはブラウザ内で動作するため、サーバーサイドの処理は不要です
- データはブラウザのローカルストレージに保存されます
- プライバシーに配慮し、個人情報の取り扱いには注意してください